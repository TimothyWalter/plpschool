<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trading Website</title>
    style.<link rel="stylesheet" href="style.css" type="text/css" media="all" />
    	
    </style>
</head>
<body>
    <h1>Products</h1>
    <div class="products">
        <!-- Sample products; add more as needed -->
        <div class="product" data-id="1" data-name="Product A" data-price="500">
            <h3>Product A</h3>
            <p>Price: KES 500</p>
            <button onclick="addToBasket(this)">Add to Basket</button>
        </div>
        <div class="product" data-id="2" data-name="Product B" data-price="300">
            <h3>Product B</h3>
            <p>Price: KES 300</p>
            <button onclick="addToBasket(this)">Add to Basket</button>
        </div>
        <!-- Add more products here -->
    </div>

    <div class="basket">
        <h3>Basket</h3>
        <div id="basket-items"></div>
        <p>Total: KES <span id="total">0</span></p>
        <button onclick="checkout()">Checkout</button>
    </div>

    <script>
        let basket = [];

        function addToBasket(button) {
            const product = button.parentElement;
            const id = product.dataset.id;
            const name = product.dataset.name;
            const price = parseInt(product.dataset.price);

            const existing = basket.find(item => item.id === id);
            if (existing) {
                existing.quantity++;
            } else {
                basket.push({ id, name, price, quantity: 1 });
            }
            updateBasket();
        }

        function updateBasket() {
            const itemsDiv = document.getElementById('basket-items');
            itemsDiv.innerHTML = '';
            let total = 0;
            basket.forEach(item => {
                const div = document.createElement('div');
                div.className = 'basket-item';
                div.textContent = `${item.name} x${item.quantity} - KES ${item.price * item.quantity}`;
                itemsDiv.appendChild(div);
                total += item.price * item.quantity;
            });
            document.getElementById('total').textContent = total;
        }

        function checkout() {
            if (basket.length === 0) return alert('Basket is empty');
            // Send to backend; in real app, use fetch to POST to /checkout
            fetch('/checkout', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ items: basket, total: parseInt(document.getElementById('total').textContent) })
            })
            .then(response => response.json())
            .then(data => {
                alert('Order placed! Payment link or prompt will be sent.');
                // Redirect to payment or show options
            })
            .catch(err => console.error(err));
        }
    </script>
</body>
</html>